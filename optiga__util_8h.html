<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OPTIGA™ Trust M: optiga_util.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="IFX_LOGO_RGB.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OPTIGA™ Trust M
   </div>
   <div id="projectbrief">Host Library Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('optiga__util_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">optiga_util.h File Reference<div class="ingroups"><a class="el" href="group__grOptigaUtil.html">OPTIGA Util</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This file defines APIs, types and data structures used in the OPTIGA utility module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="optiga__cmd_8h_source.html">optiga/cmd/optiga_cmd.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for optiga_util.h:</div>
<div class="dyncontent">
<div class="center"><img src="optiga__util_8h__incl.png" border="0" usemap="#aoptiga__util_8h" alt=""/></div>
<map name="optiga__util_8h" id="optiga__util_8h">
<area shape="rect" title="This file defines APIs, types and data structures used in the OPTIGA utility module." alt="" coords="43,5,135,32"/>
<area shape="rect" href="optiga__cmd_8h.html" title="This file defines APIs, types and data structures used in the Command (cmd) module implementation." alt="" coords="5,80,173,107"/>
<area shape="rect" href="optiga__lib__common_8h.html" title="This file provides the prototypes for the commonly used functions and structures of OPTIGA Library." alt="" coords="14,155,165,196"/>
</map>
</div>
</div>
<p><a href="optiga__util_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionoptiga__util__params.html">optiga_util_params</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">union for OPTIGA util parameters  <a href="unionoptiga__util__params.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structoptiga__util.html">optiga_util</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">OPTIGA util instance structure.  <a href="structoptiga__util.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b2ec55f9486cff8db382210c4dea957"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a0b2ec55f9486cff8db382210c4dea957">OPTIGA_UTIL_WRITE_ONLY</a>&#160;&#160;&#160;(0x00)</td></tr>
<tr class="memdesc:a0b2ec55f9486cff8db382210c4dea957"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option to only write the data object.  <a href="optiga__util_8h.html#a0b2ec55f9486cff8db382210c4dea957">More...</a><br /></td></tr>
<tr class="separator:a0b2ec55f9486cff8db382210c4dea957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0400e2372ecf9c9379c85c46f063482f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a0400e2372ecf9c9379c85c46f063482f">OPTIGA_UTIL_ERASE_AND_WRITE</a>&#160;&#160;&#160;(0x40)</td></tr>
<tr class="memdesc:a0400e2372ecf9c9379c85c46f063482f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option to erase and write the data object.  <a href="optiga__util_8h.html#a0400e2372ecf9c9379c85c46f063482f">More...</a><br /></td></tr>
<tr class="separator:a0400e2372ecf9c9379c85c46f063482f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b0a3ce0abfc27a3672703a36cf8cc15"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a8b0a3ce0abfc27a3672703a36cf8cc15">OPTIGA_UTIL_CONTEXT_NONE</a>&#160;&#160;&#160;(0x00)</td></tr>
<tr class="memdesc:a8b0a3ce0abfc27a3672703a36cf8cc15"><td class="mdescLeft">&#160;</td><td class="mdescRight">To Initialize a clean application context.  <a href="optiga__util_8h.html#a8b0a3ce0abfc27a3672703a36cf8cc15">More...</a><br /></td></tr>
<tr class="separator:a8b0a3ce0abfc27a3672703a36cf8cc15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3e0f2b9c3a24565ae5f5b101acf0585"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#ae3e0f2b9c3a24565ae5f5b101acf0585">OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</a>(p_instance,  protection_level)&#160;&#160;&#160;{}</td></tr>
<tr class="memdesc:ae3e0f2b9c3a24565ae5f5b101acf0585"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables the protected I2C communication with OPTIGA for UTIL instances.  <a href="optiga__util_8h.html#ae3e0f2b9c3a24565ae5f5b101acf0585">More...</a><br /></td></tr>
<tr class="separator:ae3e0f2b9c3a24565ae5f5b101acf0585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51ba150d090d4cf9dfb7c363bbaa32b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a51ba150d090d4cf9dfb7c363bbaa32b2">OPTIGA_UTIL_SET_COMMS_PROTOCOL_VERSION</a>(p_instance,  version)&#160;&#160;&#160;{}</td></tr>
<tr class="memdesc:a51ba150d090d4cf9dfb7c363bbaa32b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select the protocol version required for the I2C protected communication for UTIL instances.  <a href="optiga__util_8h.html#a51ba150d090d4cf9dfb7c363bbaa32b2">More...</a><br /></td></tr>
<tr class="separator:a51ba150d090d4cf9dfb7c363bbaa32b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebda29a6a2408d82404e4cb8e9f4a3e0"><td class="memItemLeft" align="right" valign="top">typedef union <a class="el" href="unionoptiga__util__params.html">optiga_util_params</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#aebda29a6a2408d82404e4cb8e9f4a3e0">optiga_util_params_t</a></td></tr>
<tr class="memdesc:aebda29a6a2408d82404e4cb8e9f4a3e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">union for OPTIGA util parameters  <a href="optiga__util_8h.html#aebda29a6a2408d82404e4cb8e9f4a3e0">More...</a><br /></td></tr>
<tr class="separator:aebda29a6a2408d82404e4cb8e9f4a3e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9b359858785dd3f7ad2ff937f9fcd2c"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structoptiga__util.html">optiga_util</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a></td></tr>
<tr class="memdesc:aa9b359858785dd3f7ad2ff937f9fcd2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">OPTIGA util instance structure type.  <a href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">More...</a><br /></td></tr>
<tr class="separator:aa9b359858785dd3f7ad2ff937f9fcd2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0da27f2191f3b66410755584a1ceb2d4"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4">optiga_util_create</a> (uint8_t optiga_instance_id, <a class="el" href="optiga__lib__types_8h.html#a21dfbe8aba0ab5d12ed647269e64e59f">callback_handler_t</a> handler, void *caller_context)</td></tr>
<tr class="memdesc:a0da27f2191f3b66410755584a1ceb2d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a>.  <a href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4">More...</a><br /></td></tr>
<tr class="separator:a0da27f2191f3b66410755584a1ceb2d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae14dd5de3ec0893cea9b8497f92f92c3"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#ae14dd5de3ec0893cea9b8497f92f92c3">optiga_util_destroy</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me)</td></tr>
<tr class="memdesc:ae14dd5de3ec0893cea9b8497f92f92c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">De-Initializes the OPTIGA util instance.  <a href="optiga__util_8h.html#ae14dd5de3ec0893cea9b8497f92f92c3">More...</a><br /></td></tr>
<tr class="separator:ae14dd5de3ec0893cea9b8497f92f92c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf602ea51ad8655a6ecc17b54dc94ff2"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2">optiga_util_open_application</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me, <a class="el" href="optiga__lib__types_8h.html#a57c3b7201116536b822f0f8520aa99c7">bool_t</a> perform_restore)</td></tr>
<tr class="memdesc:acf602ea51ad8655a6ecc17b54dc94ff2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the communication with optiga and open the application on OPTIGA.  <a href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2">More...</a><br /></td></tr>
<tr class="separator:acf602ea51ad8655a6ecc17b54dc94ff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231d5c7a972cb34cb09a70e4c2a5c6ff"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a231d5c7a972cb34cb09a70e4c2a5c6ff">optiga_util_close_application</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me, <a class="el" href="optiga__lib__types_8h.html#a57c3b7201116536b822f0f8520aa99c7">bool_t</a> perform_hibernate)</td></tr>
<tr class="memdesc:a231d5c7a972cb34cb09a70e4c2a5c6ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the application on OPTIGA and closes the communication with optiga.  <a href="optiga__util_8h.html#a231d5c7a972cb34cb09a70e4c2a5c6ff">More...</a><br /></td></tr>
<tr class="separator:a231d5c7a972cb34cb09a70e4c2a5c6ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a690dcea9dbca0d18aba953d5dd27915e"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a690dcea9dbca0d18aba953d5dd27915e">optiga_util_read_data</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me, uint16_t optiga_oid, uint16_t offset, uint8_t *buffer, uint16_t *length)</td></tr>
<tr class="memdesc:a690dcea9dbca0d18aba953d5dd27915e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads data from optiga.  <a href="optiga__util_8h.html#a690dcea9dbca0d18aba953d5dd27915e">More...</a><br /></td></tr>
<tr class="separator:a690dcea9dbca0d18aba953d5dd27915e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a930666df2e8160868e45a5fa49c3755b"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a930666df2e8160868e45a5fa49c3755b">optiga_util_read_metadata</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me, uint16_t optiga_oid, uint8_t *buffer, uint16_t *length)</td></tr>
<tr class="memdesc:a930666df2e8160868e45a5fa49c3755b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads metadata of the specified data object from optiga.  <a href="optiga__util_8h.html#a930666df2e8160868e45a5fa49c3755b">More...</a><br /></td></tr>
<tr class="separator:a930666df2e8160868e45a5fa49c3755b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a908d07933cfc39b1cfc6c98115baa81c"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a908d07933cfc39b1cfc6c98115baa81c">optiga_util_write_data</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me, uint16_t optiga_oid, uint8_t write_type, uint16_t offset, const uint8_t *buffer, uint16_t length)</td></tr>
<tr class="memdesc:a908d07933cfc39b1cfc6c98115baa81c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data to optiga.  <a href="optiga__util_8h.html#a908d07933cfc39b1cfc6c98115baa81c">More...</a><br /></td></tr>
<tr class="separator:a908d07933cfc39b1cfc6c98115baa81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50f933556223d4830ee0e7d958b35829"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a50f933556223d4830ee0e7d958b35829">optiga_util_write_metadata</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me, uint16_t optiga_oid, const uint8_t *buffer, uint8_t length)</td></tr>
<tr class="memdesc:a50f933556223d4830ee0e7d958b35829"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes metadata for the user provided data object.  <a href="optiga__util_8h.html#a50f933556223d4830ee0e7d958b35829">More...</a><br /></td></tr>
<tr class="separator:a50f933556223d4830ee0e7d958b35829"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a936ca9753adb87d7717444a025c87e6d"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a936ca9753adb87d7717444a025c87e6d">optiga_util_protected_update_start</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me, uint8_t manifest_version, const uint8_t *<a class="el" href="structmanifest.html">manifest</a>, uint16_t manifest_length)</td></tr>
<tr class="memdesc:a936ca9753adb87d7717444a025c87e6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiates the start of protected update of object by writing manifest into OPTIGA object.  <a href="optiga__util_8h.html#a936ca9753adb87d7717444a025c87e6d">More...</a><br /></td></tr>
<tr class="separator:a936ca9753adb87d7717444a025c87e6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad121f76051d9307f4f477b847cbde44e"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#ad121f76051d9307f4f477b847cbde44e">optiga_util_protected_update_continue</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me, const uint8_t *fragment, uint16_t fragment_length)</td></tr>
<tr class="memdesc:ad121f76051d9307f4f477b847cbde44e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends fragment(s) of data to be written to OPTIGA.  <a href="optiga__util_8h.html#ad121f76051d9307f4f477b847cbde44e">More...</a><br /></td></tr>
<tr class="separator:ad121f76051d9307f4f477b847cbde44e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17e1325de014ac9e6dd2de5a3dcc83b9"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#a17e1325de014ac9e6dd2de5a3dcc83b9">optiga_util_protected_update_final</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me, const uint8_t *fragment, uint16_t fragment_length)</td></tr>
<tr class="memdesc:a17e1325de014ac9e6dd2de5a3dcc83b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the last fragment to finalize the protected update of data object.  <a href="optiga__util_8h.html#a17e1325de014ac9e6dd2de5a3dcc83b9">More...</a><br /></td></tr>
<tr class="separator:a17e1325de014ac9e6dd2de5a3dcc83b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad885663beb187b012f686a9219712317"><td class="memItemLeft" align="right" valign="top">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optiga__util_8h.html#ad885663beb187b012f686a9219712317">optiga_util_update_count</a> (<a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *me, uint16_t optiga_counter_oid, uint8_t count)</td></tr>
<tr class="memdesc:ad885663beb187b012f686a9219712317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments the counter object by a value specified by user.  <a href="optiga__util_8h.html#ad885663beb187b012f686a9219712317">More...</a><br /></td></tr>
<tr class="separator:ad885663beb187b012f686a9219712317"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file defines APIs, types and data structures used in the OPTIGA utility module. </p>
<dl class="section author"><dt>Author</dt><dd>Infineon Technologies AG </dd></dl>

<p class="definition">Definition in file <a class="el" href="optiga__util_8h_source.html">optiga_util.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a8b0a3ce0abfc27a3672703a36cf8cc15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b0a3ce0abfc27a3672703a36cf8cc15">&#9670;&nbsp;</a></span>OPTIGA_UTIL_CONTEXT_NONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OPTIGA_UTIL_CONTEXT_NONE&#160;&#160;&#160;(0x00)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>To Initialize a clean application context. </p>

<p class="definition">Definition at line <a class="el" href="optiga__util_8h_source.html#l00055">55</a> of file <a class="el" href="optiga__util_8h_source.html">optiga_util.h</a>.</p>

</div>
</div>
<a id="a0400e2372ecf9c9379c85c46f063482f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0400e2372ecf9c9379c85c46f063482f">&#9670;&nbsp;</a></span>OPTIGA_UTIL_ERASE_AND_WRITE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OPTIGA_UTIL_ERASE_AND_WRITE&#160;&#160;&#160;(0x40)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Option to erase and write the data object. </p>

<p class="definition">Definition at line <a class="el" href="optiga__util_8h_source.html#l00051">51</a> of file <a class="el" href="optiga__util_8h_source.html">optiga_util.h</a>.</p>

</div>
</div>
<a id="ae3e0f2b9c3a24565ae5f5b101acf0585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3e0f2b9c3a24565ae5f5b101acf0585">&#9670;&nbsp;</a></span>OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_instance, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">protection_level&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;{}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables the protected I2C communication with OPTIGA for UTIL instances. </p>
<p>Enables the protected I2C communication with OPTIGA</p><ul>
<li>Sets the protection mode for the supplied instance.<br  />
</li>
<li>Call this function before calling the service layer API which requires protection.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li><a class="el" href="optiga__lib__config__m__v3_8h.html#ac00fecfdecef2033e4db53935b5e076a" title="OPTIGA COMMS shielded connection feature. To disable the feature, undefine the macro.">OPTIGA_COMMS_SHIELDED_CONNECTION</a> macro must be defined.<br  />
</li>
<li><a class="el" href="optiga__util_8h.html#a51ba150d090d4cf9dfb7c363bbaa32b2" title="Select the protocol version required for the I2C protected communication for UTIL instances.">OPTIGA_UTIL_SET_COMMS_PROTOCOL_VERSION</a> function must be called once to set the required protocol version<ul>
<li>Currently only Pre-shared Secret based version is supported.</li>
</ul>
</li>
<li>The host and OPTIGA must be paired and Pre-Shared secret is available.<br  />
</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The protection mode for the instance is reset to <a class="el" href="optiga__lib__common_8h.html#ad11573d4b07fe53b36101b46d03b732d" title="When command data and response data is unprotected.">OPTIGA_COMMS_NO_PROTECTION</a> once the service layer API returns synchronously.</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_instance</td><td>Valid pointer to an instance </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">protection_level</td><td>Required protection mode<ul>
<li><a class="el" href="optiga__lib__common_8h.html#ad11573d4b07fe53b36101b46d03b732d" title="When command data and response data is unprotected.">OPTIGA_COMMS_NO_PROTECTION</a> : Command and response is unprotected</li>
<li><a class="el" href="optiga__lib__common_8h.html#a7a02a5f19641524fec1e3dd901117eac" title="When command data is protected and response data is unprotected.">OPTIGA_COMMS_COMMAND_PROTECTION</a> : Command is protected and response is unprotected</li>
<li><a class="el" href="optiga__lib__common_8h.html#a7ac32906d918dd70bdb565b9ccc184d3" title="When command data is unprotected and response data is protected.">OPTIGA_COMMS_RESPONSE_PROTECTION</a> : Command is unprotected and response is protected</li>
<li><a class="el" href="optiga__lib__common_8h.html#a2a42861da10a3d12802b31ee9dd30707" title="Both command data and response data are protected.">OPTIGA_COMMS_FULL_PROTECTION</a> : Both command and response is protected</li>
<li>To re-establish secure channel, bitwise-OR protection_level with <a class="el" href="optiga__lib__common_8h.html#af99053312743440d258495ad2c3ed5fc" title="Re-establish shielded connection.">OPTIGA_COMMS_RE_ESTABLISH</a> </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="optiga__util_8h_source.html#l00586">586</a> of file <a class="el" href="optiga__util_8h_source.html">optiga_util.h</a>.</p>

</div>
</div>
<a id="a51ba150d090d4cf9dfb7c363bbaa32b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51ba150d090d4cf9dfb7c363bbaa32b2">&#9670;&nbsp;</a></span>OPTIGA_UTIL_SET_COMMS_PROTOCOL_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OPTIGA_UTIL_SET_COMMS_PROTOCOL_VERSION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_instance, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">version&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;{}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Select the protocol version required for the I2C protected communication for UTIL instances. </p>
<p>Select the protocol version required for the I2C protected communication</p><ul>
<li>Select the protocol version for the supplied instance.<br  />
</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li><a class="el" href="optiga__lib__config__m__v3_8h.html#ac00fecfdecef2033e4db53935b5e076a" title="OPTIGA COMMS shielded connection feature. To disable the feature, undefine the macro.">OPTIGA_COMMS_SHIELDED_CONNECTION</a> macro must be defined.<br  />
</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>None</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_instance</td><td>Valid pointer to an instance </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">version</td><td>Required protocol version<ul>
<li><a class="el" href="optiga__lib__common_8h.html#a9a19aa79758c2fc235d25f8422f2e0ab" title="Pre shared secret protocol version.">OPTIGA_COMMS_PROTOCOL_VERSION_PRE_SHARED_SECRET</a> : Pre-shared Secret based protocol version </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="optiga__util_8h_source.html#l00613">613</a> of file <a class="el" href="optiga__util_8h_source.html">optiga_util.h</a>.</p>

</div>
</div>
<a id="a0b2ec55f9486cff8db382210c4dea957"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b2ec55f9486cff8db382210c4dea957">&#9670;&nbsp;</a></span>OPTIGA_UTIL_WRITE_ONLY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OPTIGA_UTIL_WRITE_ONLY&#160;&#160;&#160;(0x00)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Option to only write the data object. </p>

<p class="definition">Definition at line <a class="el" href="optiga__util_8h_source.html#l00049">49</a> of file <a class="el" href="optiga__util_8h_source.html">optiga_util.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="aebda29a6a2408d82404e4cb8e9f4a3e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebda29a6a2408d82404e4cb8e9f4a3e0">&#9670;&nbsp;</a></span>optiga_util_params_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef union <a class="el" href="unionoptiga__util__params.html">optiga_util_params</a> <a class="el" href="optiga__util_8h.html#aebda29a6a2408d82404e4cb8e9f4a3e0">optiga_util_params_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>union for OPTIGA util parameters </p>

</div>
</div>
<a id="aa9b359858785dd3f7ad2ff937f9fcd2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9b359858785dd3f7ad2ff937f9fcd2c">&#9670;&nbsp;</a></span>optiga_util_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structoptiga__util.html">optiga_util</a> <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OPTIGA util instance structure type. </p>

<p class="definition">Definition at line <a class="el" href="optiga__util_8h_source.html#l00001">1</a> of file <a class="el" href="optiga__util_8h_source.html">optiga_util.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a231d5c7a972cb34cb09a70e4c2a5c6ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231d5c7a972cb34cb09a70e4c2a5c6ff">&#9670;&nbsp;</a></span>optiga_util_close_application()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_close_application </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="optiga__lib__types_8h.html#a57c3b7201116536b822f0f8520aa99c7">bool_t</a>&#160;</td>
          <td class="paramname"><em>perform_hibernate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the application on OPTIGA and closes the communication with optiga. </p>
<p>Closes the communication with OPTIGA for the given instance.</p><ul>
<li>Initiate close application command to optiga.</li>
<li>Perform manage context secure session save operations.</li>
<li>De-Initializes the OPTIGA and closes the communication channel.</li>
<li>Power downs the OPTIGA after closing the application on optiga.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>The application on OPTIGA must be opened using <a class="el" href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2" title="Initializes the communication with optiga and open the application on OPTIGA.">optiga_util_open_application</a> before using this API.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>For <b>protected I2C communication</b>, Refer <a class="el" href="optiga__util_8h.html#ae3e0f2b9c3a24565ae5f5b101acf0585" title="Enables the protected I2C communication with OPTIGA for UTIL instances.">OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</a></li>
<li>Error codes from lower layer will be returned as it is.</li>
<li>Close application with hibernate and shielded connection establishment(negotiation/re-negotiation) will fail at OPTIGA because hibernation is not allowed when SEC value is greater than zero. The SEC value increments internally on every shielded connection negotiation process.</li>
</ul>
</dd></dl>
<p><br  />
 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> created using <a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4" title="Create an instance of optiga_util_t.">optiga_util_create</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">perform_hibernate</td><td>Hibernate the application on OPTIGA. The values must be as defined below.<ul>
<li>TRUE (1) - Performs application hibernate. <br  />
</li>
<li>FALSE (0) - De-Initializes application context.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a99a4ee66a8a11d1a9cd1bac6ae3d08b2" title="OPTIGA util API execution is successful.">OPTIGA_UTIL_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Input arguments are NULL </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a725d238392ea8589e8ef1e4e1f28347c" title="OPTIGA Device Error to return OPTIGA security chip specific error codes (Refer Solution reference man...">OPTIGA_DEVICE_ERROR</a></td><td>Command execution failure in OPTIGA and the LSB indicates the error code. (Refer Solution Reference Manual)</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 main_xmc4800_sample.c </p>

</div>
</div>
<a id="a0da27f2191f3b66410755584a1ceb2d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0da27f2191f3b66410755584a1ceb2d4">&#9670;&nbsp;</a></span>optiga_util_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a>* optiga_util_create </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>optiga_instance_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="optiga__lib__types_8h.html#a21dfbe8aba0ab5d12ed647269e64e59f">callback_handler_t</a>&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>caller_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a>. </p>
<p>Create an instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a>.</p><ul>
<li>Stores the callers context and callback handler.</li>
<li>Allocate memory for <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a>.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>None</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>This API is implemented in synchronous mode.</li>
<li>For <b>protected I2C communication</b>,<ul>
<li>Default protection level for this API is <a class="el" href="optiga__lib__config__m__v3_8h.html#ae50ff77c59d9433957fe47efe3ee51db" title="Default reset protection level for OPTIGA CRYPT and UTIL APIs.">OPTIGA_COMMS_DEFAULT_PROTECTION_LEVEL</a>.</li>
<li>Default protocol version for this API is <a class="el" href="optiga__lib__common_8h.html#a9a19aa79758c2fc235d25f8422f2e0ab" title="Pre shared secret protocol version.">OPTIGA_COMMS_PROTOCOL_VERSION_PRE_SHARED_SECRET</a>.</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">optiga_instance_id</td><td>Indicates the OPTIGA instance to be associated with <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a>. Value should be defined as below<ul>
<li><a class="el" href="optiga__lib__common_8h.html#a96c78e78aeb4e2223983e0febbd74429" title="Instance id of OPTIGA slave.">OPTIGA_INSTANCE_ID_0</a> : Indicate created instance will be part of OPTIGA with slave address 0x30. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>Valid pointer to callback function </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">caller_context</td><td>Pointer to upper layer context, contains user context data</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a></td><td>On success function will return pointer of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> </td></tr>
    <tr><td class="paramname">NULL</td><td>Input arguments are NULL.<br  />
 Low layer function fails.<br  />
 OPTIGA_CMD_MAX_REGISTRATIONS number of instances are already created.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 main_xmc4800_sample.c </p>

</div>
</div>
<a id="ae14dd5de3ec0893cea9b8497f92f92c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae14dd5de3ec0893cea9b8497f92f92c3">&#9670;&nbsp;</a></span>optiga_util_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>De-Initializes the OPTIGA util instance. </p>
<p>De-Initializes the <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> instance.</p><ul>
<li>De-allocate the memory of the <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> instance.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>None</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>User must take care to nullify the instance pointer.</li>
<li>Invoke this API only after all the asynchronous process is completed otherwise the behavior of software stack is not defined.</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a8e9c9419d8fae44064093fa516bc6da1" title="OPTIGA host library API execution is successful.">OPTIGA_LIB_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Wrong Input arguments provided </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 main_xmc4800_sample.c </p>

</div>
</div>
<a id="acf602ea51ad8655a6ecc17b54dc94ff2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf602ea51ad8655a6ecc17b54dc94ff2">&#9670;&nbsp;</a></span>optiga_util_open_application()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_open_application </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="optiga__lib__types_8h.html#a57c3b7201116536b822f0f8520aa99c7">bool_t</a>&#160;</td>
          <td class="paramname"><em>perform_restore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the communication with optiga and open the application on OPTIGA. </p>
<p>Initializes the communication with OPTIGA for the given instance.</p><ul>
<li>Sets up optiga comms channel.<br  />
</li>
<li>Initiate open application command to optiga.<br  />
</li>
<li>Perform manage context , session restore operations and application restore.<br  />
</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>For restoring OPTIGA application, the application must be in hibernate state using <a class="el" href="optiga__util_8h.html#a231d5c7a972cb34cb09a70e4c2a5c6ff" title="Closes the application on OPTIGA and closes the communication with optiga.">optiga_util_close_application</a>.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>For <b>protected I2C communication</b>, Refer <a class="el" href="optiga__util_8h.html#ae3e0f2b9c3a24565ae5f5b101acf0585" title="Enables the protected I2C communication with OPTIGA for UTIL instances.">OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</a></li>
<li>Error codes from lower layer will be returned as it is.</li>
<li>If error in lower layer occurs while restoring OPTIGA application, then initialize a clean OPTIGA application context.</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> created using <a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4" title="Create an instance of optiga_util_t.">optiga_util_create</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">perform_restore</td><td>Restore application on OPTIGA from a previous hibernate state. The values must be as defined below<ul>
<li>TRUE (1) - Performs application restore. <br  />
</li>
<li>FALSE (0) - Initialize a clean application context.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a99a4ee66a8a11d1a9cd1bac6ae3d08b2" title="OPTIGA util API execution is successful.">OPTIGA_UTIL_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Wrong Input arguments provided </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a725d238392ea8589e8ef1e4e1f28347c" title="OPTIGA Device Error to return OPTIGA security chip specific error codes (Refer Solution reference man...">OPTIGA_DEVICE_ERROR</a></td><td>Command execution failure in OPTIGA and the LSB indicates the error code. (Refer Solution Reference Manual)</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 main_xmc4800_sample.c </p>

</div>
</div>
<a id="ad121f76051d9307f4f477b847cbde44e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad121f76051d9307f4f477b847cbde44e">&#9670;&nbsp;</a></span>optiga_util_protected_update_continue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_protected_update_continue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>fragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>fragment_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends fragment(s) of data to be written to OPTIGA. </p>
<p>Sends a fragment of data to be written to OPTIGA.</p><ul>
<li>Invokes <a class="el" href="optiga__cmd_8h.html#abcce35597480102459890afaadb3426a" title="Writes protected object fragments to OPTIGA.">optiga_cmd_set_object_protected</a> API, to send the fragment of data to write to OPTIGA.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>The application on OPTIGA must be opened using <a class="el" href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2" title="Initializes the communication with optiga and open the application on OPTIGA.">optiga_util_open_application</a>.</li>
<li>The manifest must be written to OPTIGA using <a class="el" href="optiga__util_8h.html#a936ca9753adb87d7717444a025c87e6d" title="Initiates the start of protected update of object by writing manifest into OPTIGA object.">optiga_util_protected_update_start</a>, otherwise lower layer returns an error. </li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The <b>protected I2C communication</b> value set in <a class="el" href="optiga__util_8h.html#a936ca9753adb87d7717444a025c87e6d" title="Initiates the start of protected update of object by writing manifest into OPTIGA object.">optiga_util_protected_update_start</a> will be used in this API.<br  />
</li>
<li>Error codes from lower layers will be returned as it is.<br  />
</li>
<li>For writing 'n' fragment (s) ,<ul>
<li>if n &gt; 1 : Send 1 to 'n - 1' fragments using <a class="el" href="optiga__util_8h.html#ad121f76051d9307f4f477b847cbde44e" title="Sends fragment(s) of data to be written to OPTIGA.">optiga_util_protected_update_continue</a> and and the final fragment using <a class="el" href="optiga__util_8h.html#a17e1325de014ac9e6dd2de5a3dcc83b9" title="Sends the last fragment to finalize the protected update of data object.">optiga_util_protected_update_final</a>.<br  />
</li>
<li>if n == 1 : Send the fragment using <a class="el" href="optiga__util_8h.html#a17e1325de014ac9e6dd2de5a3dcc83b9" title="Sends the last fragment to finalize the protected update of data object.">optiga_util_protected_update_final</a>.<br  />
</li>
</ul>
</li>
<li>Chaining of fragments and the sequence of sending fragments must be handled externally to this API.<br  />
</li>
<li>The strict sequence is terminated in case of an error from lower layer<br  />
</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> created using <a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4" title="Create an instance of optiga_util_t.">optiga_util_create</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fragment</td><td>Valid pointer to the buffer which contains fragment<ul>
<li>It must be a valid fragment, otherwise OPTIGA returns an error.<br  />
 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fragment_length</td><td>Length of fragment to be written</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a99a4ee66a8a11d1a9cd1bac6ae3d08b2" title="OPTIGA util API execution is successful.">OPTIGA_UTIL_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Wrong Input arguments provided </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a725d238392ea8589e8ef1e4e1f28347c" title="OPTIGA Device Error to return OPTIGA security chip specific error codes (Refer Solution reference man...">OPTIGA_DEVICE_ERROR</a></td><td>Command execution failure in OPTIGA and the LSB indicates the error code. (Refer Solution Reference Manual)</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 example_optiga_util_protected_update.c </p>

</div>
</div>
<a id="a17e1325de014ac9e6dd2de5a3dcc83b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17e1325de014ac9e6dd2de5a3dcc83b9">&#9670;&nbsp;</a></span>optiga_util_protected_update_final()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_protected_update_final </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>fragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>fragment_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the last fragment to finalize the protected update of data object. </p>
<p>Sends the last fragment to finalize the protected update of data object.</p><ul>
<li>Invokes <a class="el" href="optiga__cmd_8h.html#abcce35597480102459890afaadb3426a" title="Writes protected object fragments to OPTIGA.">optiga_cmd_set_object_protected</a> API, based on the input arguments to write the final fragment to data object.</li>
<li>It terminates the strict sequence.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>The application on OPTIGA must be opened using <a class="el" href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2" title="Initializes the communication with optiga and open the application on OPTIGA.">optiga_util_open_application</a>.</li>
<li>The manifest must be written to OPTIGA using <a class="el" href="optiga__util_8h.html#a936ca9753adb87d7717444a025c87e6d" title="Initiates the start of protected update of object by writing manifest into OPTIGA object.">optiga_util_protected_update_start</a>, otherwise lower layer returns an error.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The <b>protected I2C communication</b> value set in <a class="el" href="optiga__util_8h.html#a936ca9753adb87d7717444a025c87e6d" title="Initiates the start of protected update of object by writing manifest into OPTIGA object.">optiga_util_protected_update_start</a> will be used in this API.<br  />
</li>
<li>Error codes from lower layers will be returned as it is.<br  />
</li>
<li>The strict sequence is terminated in case of an error from lower layer.<br  />
</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> created using <a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4" title="Create an instance of optiga_util_t.">optiga_util_create</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fragment</td><td>Valid pointer to the buffer which contains the last fragment.<ul>
<li>If NULL, only strict sequence is released and no APDU is sent to OPTIGA </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fragment_length</td><td>Length of fragment to be written</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a99a4ee66a8a11d1a9cd1bac6ae3d08b2" title="OPTIGA util API execution is successful.">OPTIGA_UTIL_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Wrong Input arguments provided </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a725d238392ea8589e8ef1e4e1f28347c" title="OPTIGA Device Error to return OPTIGA security chip specific error codes (Refer Solution reference man...">OPTIGA_DEVICE_ERROR</a></td><td>Command execution failure in OPTIGA and the LSB indicates the error code. (Refer Solution Reference Manual)</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 example_optiga_util_protected_update.c </p>

</div>
</div>
<a id="a936ca9753adb87d7717444a025c87e6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a936ca9753adb87d7717444a025c87e6d">&#9670;&nbsp;</a></span>optiga_util_protected_update_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_protected_update_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>manifest_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>manifest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>manifest_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiates the start of protected update of object by writing manifest into OPTIGA object. </p>
<p>Initiates the start of protected update of object.</p><ul>
<li>It marks the beginning of a strict sequence. None of the service layer API will be processed until the strict sequence is terminated.</li>
<li>Invokes <a class="el" href="optiga__cmd_8h.html#abcce35597480102459890afaadb3426a" title="Writes protected object fragments to OPTIGA.">optiga_cmd_set_object_protected</a> API, based on the input arguments to send manifest to OPTIGA.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>The application on OPTIGA must be opened using <a class="el" href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2" title="Initializes the communication with optiga and open the application on OPTIGA.">optiga_util_open_application</a>.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>For <b>protected I2C communication</b>, Refer <a class="el" href="optiga__util_8h.html#ae3e0f2b9c3a24565ae5f5b101acf0585" title="Enables the protected I2C communication with OPTIGA for UTIL instances.">OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</a><ul>
<li>The protection level set in this API will be used for <a class="el" href="optiga__util_8h.html#ad121f76051d9307f4f477b847cbde44e" title="Sends fragment(s) of data to be written to OPTIGA.">optiga_util_protected_update_continue</a> and <a class="el" href="optiga__util_8h.html#a17e1325de014ac9e6dd2de5a3dcc83b9" title="Sends the last fragment to finalize the protected update of data object.">optiga_util_protected_update_final</a>.<br  />
</li>
</ul>
</li>
<li>Error codes from lower layers will be returned as it is.<br  />
</li>
<li>The strict sequence is terminated<ul>
<li>In case of an error from lower layer.<br  />
</li>
<li>Same instance is used for other service layer APIs (except <a class="el" href="optiga__util_8h.html#ad121f76051d9307f4f477b847cbde44e" title="Sends fragment(s) of data to be written to OPTIGA.">optiga_util_protected_update_continue</a>).<br  />
</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> created using <a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4" title="Create an instance of optiga_util_t.">optiga_util_create</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">manifest_version</td><td>Version of manifest to be written </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">manifest</td><td>Valid pointer to the buffer which contains manifest<ul>
<li>It should be a valid manifest, otherwise OPTIGA returns an error.<br  />
 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">manifest_length</td><td>Length of manifest to be written</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a99a4ee66a8a11d1a9cd1bac6ae3d08b2" title="OPTIGA util API execution is successful.">OPTIGA_UTIL_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Wrong Input arguments provided </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a725d238392ea8589e8ef1e4e1f28347c" title="OPTIGA Device Error to return OPTIGA security chip specific error codes (Refer Solution reference man...">OPTIGA_DEVICE_ERROR</a></td><td>Command execution failure in OPTIGA and the LSB indicates the error code. (Refer Solution Reference Manual)</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 example_optiga_util_protected_update.c </p>

</div>
</div>
<a id="a690dcea9dbca0d18aba953d5dd27915e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a690dcea9dbca0d18aba953d5dd27915e">&#9670;&nbsp;</a></span>optiga_util_read_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_read_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>optiga_oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads data from optiga. </p>
<p>Retrieves the requested data that is stored in the user provided data object.<br  />
</p><ul>
<li>Invokes <a class="el" href="optiga__cmd_8h.html#a69b5f0b46fb02c036db4e0553a4e48e3" title="Reads data or metadata of the specified data object.">optiga_cmd_get_data_object</a> API and based on the input arguments, read the data from the data object.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>The application on OPTIGA must be opened using <a class="el" href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2" title="Initializes the communication with optiga and open the application on OPTIGA.">optiga_util_open_application</a> before using this API.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>For <b>protected I2C communication</b>, Refer <a class="el" href="optiga__util_8h.html#ae3e0f2b9c3a24565ae5f5b101acf0585" title="Enables the protected I2C communication with OPTIGA for UTIL instances.">OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</a></li>
<li>Error codes from lower layers will be returned as it is.</li>
<li>The maximum value of the <b>*length</b> parameter must be the size of buffer <b>buffer</b>. In case the value is greater than buffer size, memory corruption can occur.<br  />
</li>
<li>If any errors occur while retrieving the data, <b>*length</b> parameter is set to 0.</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> created using <a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4" title="Create an instance of optiga_util_t.">optiga_util_create</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">optiga_oid</td><td>OID of data object<ul>
<li>It should be a valid data object, otherwise OPTIGA returns an error.<br  />
 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Offset from within data object<ul>
<li>It must be valid offset from within data object, otherwise OPTIGA returns an error.<br  />
 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buffer</td><td>Valid pointer to the buffer to which data is read </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">length</td><td>Valid pointer to the length of data to be read from data object<ul>
<li>When the data is successfully retrieved, it is updated with actual data length retrieved</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a99a4ee66a8a11d1a9cd1bac6ae3d08b2" title="OPTIGA util API execution is successful.">OPTIGA_UTIL_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Wrong Input arguments provided </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a725d238392ea8589e8ef1e4e1f28347c" title="OPTIGA Device Error to return OPTIGA security chip specific error codes (Refer Solution reference man...">OPTIGA_DEVICE_ERROR</a></td><td>Command execution failure in OPTIGA and the LSB indicates the error code. (Refer Solution Reference Manual)</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 example_optiga_util_read_data.c </p>

</div>
</div>
<a id="a930666df2e8160868e45a5fa49c3755b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a930666df2e8160868e45a5fa49c3755b">&#9670;&nbsp;</a></span>optiga_util_read_metadata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_read_metadata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>optiga_oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads metadata of the specified data object from optiga. </p>
<p>Reads the metadata of the user provided data object.</p><ul>
<li>Invokes <a class="el" href="optiga__cmd_8h.html#a69b5f0b46fb02c036db4e0553a4e48e3" title="Reads data or metadata of the specified data object.">optiga_cmd_get_data_object</a> API, based on the input arguments to read the metadata from the data object.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>The application on OPTIGA must be opened using <a class="el" href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2" title="Initializes the communication with optiga and open the application on OPTIGA.">optiga_util_open_application</a> before using this API.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>For <b>protected I2C communication</b>, Refer <a class="el" href="optiga__util_8h.html#ae3e0f2b9c3a24565ae5f5b101acf0585" title="Enables the protected I2C communication with OPTIGA for UTIL instances.">OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</a></li>
<li>Error codes from lower layers will be returned as it is.</li>
<li>The metadata returned will be in TLV format.</li>
<li>The maximum value of the <b>*length</b> parameter must be the size of <b>buffer</b>. In case the value is greater than buffer size, memory corruption can occur.<br  />
</li>
<li>If any errors occur while retrieving the data, <b>*length</b> parameter is set to 0.</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> created using <a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4" title="Create an instance of optiga_util_t.">optiga_util_create</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">optiga_oid</td><td>OID of data object<ul>
<li>It should be a valid data object, otherwise OPTIGA returns an error.<br  />
 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buffer</td><td>Valid pointer to the buffer to which metadata is read </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">length</td><td>Valid pointer to the length of metadata to be read from data object<ul>
<li>When the metadata is successfully retrieved, it is updated with actual metadata length retrieved</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a99a4ee66a8a11d1a9cd1bac6ae3d08b2" title="OPTIGA util API execution is successful.">OPTIGA_UTIL_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Wrong Input arguments provided </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a725d238392ea8589e8ef1e4e1f28347c" title="OPTIGA Device Error to return OPTIGA security chip specific error codes (Refer Solution reference man...">OPTIGA_DEVICE_ERROR</a></td><td>Command execution failure in OPTIGA and the LSB indicates the error code. (Refer Solution Reference Manual)</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 example_optiga_util_read_data.c </p>

</div>
</div>
<a id="ad885663beb187b012f686a9219712317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad885663beb187b012f686a9219712317">&#9670;&nbsp;</a></span>optiga_util_update_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_update_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>optiga_counter_oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increments the counter object by a value specified by user. </p>
<p>Increments the counter object by a value specified by user.<br  />
</p><ul>
<li>Invokes <a class="el" href="optiga__cmd_8h.html#a84b32862e6f18e6617054d5a77ac885d" title="Writes data or metadata to the specified data object.">optiga_cmd_set_data_object</a> API, based on the input arguments to update the count to the specified data object.<br  />
</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>The application on OPTIGA must be opened using <a class="el" href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2" title="Initializes the communication with optiga and open the application on OPTIGA.">optiga_util_open_application</a> before using this API.<br  />
</li>
<li>Initial count and threshold value must be set using <a class="el" href="optiga__util_8h.html#a908d07933cfc39b1cfc6c98115baa81c" title="Writes data to optiga.">optiga_util_write_data</a>.<br  />
</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>For <b>protected I2C communication</b>, Refer <a class="el" href="optiga__util_8h.html#ae3e0f2b9c3a24565ae5f5b101acf0585" title="Enables the protected I2C communication with OPTIGA for UTIL instances.">OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</a></li>
<li>Error codes from lower layers will be returned as it is.<br  />
</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> created using <a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4" title="Create an instance of optiga_util_t.">optiga_util_create</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">optiga_counter_oid</td><td>OID of counter data object<ul>
<li>It should be a valid data object, otherwise OPTIGA returns an error.<br  />
 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>Counter value to be updated</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a99a4ee66a8a11d1a9cd1bac6ae3d08b2" title="OPTIGA util API execution is successful.">OPTIGA_UTIL_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Wrong Input arguments provided </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a725d238392ea8589e8ef1e4e1f28347c" title="OPTIGA Device Error to return OPTIGA security chip specific error codes (Refer Solution reference man...">OPTIGA_DEVICE_ERROR</a></td><td>Command execution failure in OPTIGA and the LSB indicates the error code. (Refer Solution Reference Manual)</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 example_optiga_util_update_count.c </p>

</div>
</div>
<a id="a908d07933cfc39b1cfc6c98115baa81c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a908d07933cfc39b1cfc6c98115baa81c">&#9670;&nbsp;</a></span>optiga_util_write_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_write_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>optiga_oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>write_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes data to optiga. </p>
<p>Writes the data provided by the user into the specified data object.<br  />
</p><ul>
<li>Invokes <a class="el" href="optiga__cmd_8h.html#a84b32862e6f18e6617054d5a77ac885d" title="Writes data or metadata to the specified data object.">optiga_cmd_set_data_object</a> API, based on the input arguments to write the data to the data object.<br  />
</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>The application on OPTIGA must be opened using <a class="el" href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2" title="Initializes the communication with optiga and open the application on OPTIGA.">optiga_util_open_application</a> before using this API.<br  />
</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>For <b>protected I2C communication</b>, Refer <a class="el" href="optiga__util_8h.html#ae3e0f2b9c3a24565ae5f5b101acf0585" title="Enables the protected I2C communication with OPTIGA for UTIL instances.">OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</a></li>
<li>Error codes from lower layers will be returned as it is.<br  />
</li>
<li>The maximum value of the <b>length parameter</b> is size of <b>buffer</b>. In case the value is greater than buffer size, incorrect values can get written into the data object in OPTIGA.<br  />
</li>
<li>In case the write_type provided is other than <b>erase and write(0x00)</b> or <b>write only(0x40)</b>, the function returns <a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a>.<br  />
</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> created using <a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4" title="Create an instance of optiga_util_t.">optiga_util_create</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">optiga_oid</td><td>OID of data object<ul>
<li>It should be a valid data object, otherwise OPTIGA returns an error.<br  />
 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">write_type</td><td>Type of write must be either <a class="el" href="optiga__util_8h.html#a0b2ec55f9486cff8db382210c4dea957" title="Option to only write the data object.">OPTIGA_UTIL_WRITE_ONLY</a> or <a class="el" href="optiga__util_8h.html#a0400e2372ecf9c9379c85c46f063482f" title="Option to erase and write the data object.">OPTIGA_UTIL_ERASE_AND_WRITE</a>.<br  />
 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Offset from within data object<ul>
<li>It must be valid offset from within data object, otherwise OPTIGA returns an error.<br  />
 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>Valid pointer to the buffer with user data to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Length of data to be written</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a99a4ee66a8a11d1a9cd1bac6ae3d08b2" title="OPTIGA util API execution is successful.">OPTIGA_UTIL_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Wrong Input arguments provided </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a725d238392ea8589e8ef1e4e1f28347c" title="OPTIGA Device Error to return OPTIGA security chip specific error codes (Refer Solution reference man...">OPTIGA_DEVICE_ERROR</a></td><td>Command execution failure in OPTIGA and the LSB indicates the error code. (Refer Solution Reference Manual)</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 example_optiga_util_write_data.c </p>

</div>
</div>
<a id="a50f933556223d4830ee0e7d958b35829"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50f933556223d4830ee0e7d958b35829">&#9670;&nbsp;</a></span>optiga_util_write_metadata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIBRARY_EXPORTS <a class="el" href="optiga__lib__types_8h.html#a362af2f8da246164e07fd7b50a67bd8c">optiga_lib_status_t</a> optiga_util_write_metadata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c">optiga_util_t</a> *&#160;</td>
          <td class="paramname"><em>me</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>optiga_oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes metadata for the user provided data object. </p>
<p>Writes metadata for the specified data object.</p><ul>
<li>Invokes <a class="el" href="optiga__cmd_8h.html#a84b32862e6f18e6617054d5a77ac885d" title="Writes data or metadata to the specified data object.">optiga_cmd_set_data_object</a> API, based on the input arguments to write metadata to the data object.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>The application on OPTIGA must be opened using <a class="el" href="optiga__util_8h.html#acf602ea51ad8655a6ecc17b54dc94ff2" title="Initializes the communication with optiga and open the application on OPTIGA.">optiga_util_open_application</a>.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>For <b>protected I2C communication</b>, Refer <a class="el" href="optiga__util_8h.html#ae3e0f2b9c3a24565ae5f5b101acf0585" title="Enables the protected I2C communication with OPTIGA for UTIL instances.">OPTIGA_UTIL_SET_COMMS_PROTECTION_LEVEL</a></li>
<li>Error codes from lower layers will be returned as it is.<br  />
</li>
<li>The maximum value of the <b>length</b> parameter is size of <b>buffer</b>. In case the value is greater than buffer size, incorrect values can get written into the meta data of the data object in OPTIGA.<br  />
</li>
<li>The metadata to be written must be in TLV format.</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">me</td><td>Valid instance of <a class="el" href="optiga__util_8h.html#aa9b359858785dd3f7ad2ff937f9fcd2c" title="OPTIGA util instance structure type.">optiga_util_t</a> created using <a class="el" href="optiga__util_8h.html#a0da27f2191f3b66410755584a1ceb2d4" title="Create an instance of optiga_util_t.">optiga_util_create</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">optiga_oid</td><td>OID of data object<ul>
<li>It should be a valid data object, otherwise OPTIGA returns an error.<br  />
 </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>Valid pointer to the buffer with metadata to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Length of metadata to be written</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a99a4ee66a8a11d1a9cd1bac6ae3d08b2" title="OPTIGA util API execution is successful.">OPTIGA_UTIL_SUCCESS</a></td><td>Successful invocation </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#ab4996c2e3db3010227a077ea0a6519f3" title="OPTIGA util API called with invalid inputs.">OPTIGA_UTIL_ERROR_INVALID_INPUT</a></td><td>Wrong Input arguments provided </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a62abc3157cb484b1e0e79e69dfc7bb91" title="OPTIGA util API called when, a request of same instance is already in service.">OPTIGA_UTIL_ERROR_INSTANCE_IN_USE</a></td><td>The previous operation with the same instance is not complete </td></tr>
    <tr><td class="paramname"><a class="el" href="optiga__lib__return__codes_8h.html#a725d238392ea8589e8ef1e4e1f28347c" title="OPTIGA Device Error to return OPTIGA security chip specific error codes (Refer Solution reference man...">OPTIGA_DEVICE_ERROR</a></td><td>Command execution failure in OPTIGA and the LSB indicates the error code.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b><br  />
 example_optiga_util_write_data.c </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<hr class="footer"/>
<address class="footer">
<small>
Copyright &#169  2021 Infineon Technologies AG</a>
</small></address>
</body>
</html>
